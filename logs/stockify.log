2025-06-13 16:30:49 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 8136 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 16:30:49 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 16:30:49 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 16:30:49 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 16:30:49 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 16:30:52 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 16:30:52 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 97 ms. Found 3 JPA repository interfaces.
2025-06-13 16:30:54 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 16:30:54 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 16:30:54 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 16:30:54 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 16:30:54 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5679 ms
2025-06-13 16:30:55 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 16:30:55 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 16:30:55 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 16:30:55 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 16:30:56 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 16:30:56 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 16:30:56 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.052s)
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 16:30:56 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.115s)
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 16:30:57 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 16:30:57 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 16:30:57 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 16:30:59 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 16:30:59 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:00 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:00 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:01 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:01 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:31:02 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:02 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.SuperAdminInitializer.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:02 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 16:31:04 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 16:31:04 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d9284d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1993e03b, org.springframework.security.web.context.SecurityContextHolderFilter@6d95598e, org.springframework.security.web.header.HeaderWriterFilter@120d631b, org.springframework.web.filter.CorsFilter@438798e, org.springframework.security.web.authentication.logout.LogoutFilter@12d991e5, dev.oasis.stockify.config.tenant.TenantHeaderFilter@6fc49613, dev.oasis.stockify.config.tenant.TenantSecurityFilter@2566e1c7, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@35ec76fa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@24fc71c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1432de8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b2a2415, org.springframework.security.web.access.ExceptionTranslationFilter@5c1020d0, org.springframework.security.web.access.intercept.AuthorizationFilter@3df06cde]
2025-06-13 16:31:06 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 16:31:06 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 16:31:06 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 18.115 seconds (process running for 19.265)
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.SuperAdminInitializer.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1868916840<open>)] for JPA transaction
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@56164957]
2025-06-13 16:31:06 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:31:06 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:06 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - 🔧 Creating super admin user...
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1868916840<open>)] for JPA transaction
2025-06-13 16:31:06 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:06 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - ✅ Super admin user created successfully
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - 📋 Super Admin Credentials:
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Username: superadmin
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Password: superadmin123
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Role: SUPER_ADMIN
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - ⚠️  Please change the password after first login!
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1868916840<open>)]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1868916840<open>)] after transaction
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5af77034]
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1209744787<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'ACME Corporation', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 16:31:07 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 16:31:07 [restartedMain] [tenant:global_trade] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: global_trade
2025-06-13 16:31:07 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 16:31:07 [restartedMain] [tenant:artisan_crafts] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: artisan_crafts
2025-06-13 16:31:07 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 16:31:07 [restartedMain] [tenant:tech_solutions] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: tech_solutions
2025-06-13 16:31:07 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:31:07 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:31:07 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 4 tenants with sample data
2025-06-13 16:31:07 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1209744787<open>)]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1209744787<open>)] after transaction
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(138851180<open>)] for JPA transaction
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@57add6ab]
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:31:07 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(138851180<open>)]
2025-06-13 16:31:07 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(138851180<open>)] after transaction
2025-06-13 16:32:09 [http-nio-8080-exec-1] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 16:32:09 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 16:32:09 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-06-13 16:32:09 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:09 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:09 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:09 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:32:09 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:09 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:32:11 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:11 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:11 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:11 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:11 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:16 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:16 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:32:16 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:32:16 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:17 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:27 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:27 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:27 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:30 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:30 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:32:30 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:33:43 [File Watcher] [tenant:] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 4 class path changes (0 additions, 0 deletions, 4 modifications)
2025-06-13 16:33:43 [Thread-5] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 16:33:43 [Thread-5] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 16:33:43 [Thread-5] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-13 16:33:43 [Thread-5] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-13 16:33:43 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 8136 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 16:33:43 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 16:33:43 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 3 JPA repository interfaces.
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1272 ms
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn12: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-13 16:33:44 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 16:33:45 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.026s)
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 16:33:45 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:33:45 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:45 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:45 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.SuperAdminInitializer.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:46 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 16:33:46 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 16:33:46 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65d897ff, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7351861d, org.springframework.security.web.context.SecurityContextHolderFilter@3c1bd59e, org.springframework.security.web.header.HeaderWriterFilter@cb6f6e0, org.springframework.web.filter.CorsFilter@541f82e4, org.springframework.security.web.authentication.logout.LogoutFilter@3d4dae25, dev.oasis.stockify.config.tenant.TenantHeaderFilter@341d60b1, dev.oasis.stockify.config.tenant.TenantSecurityFilter@533fb5a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@47cfeed5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@70d69ecf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@81c7183, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3dc4f4ea, org.springframework.security.web.access.ExceptionTranslationFilter@64614f2a, org.springframework.security.web.access.intercept.AuthorizationFilter@28131e6b]
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 4.039 seconds (process running for 180.265)
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.SuperAdminInitializer.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2095506490<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3118e225]
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - 🔧 Creating super admin user...
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(2095506490<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - ✅ Super admin user created successfully
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - 📋 Super Admin Credentials:
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Username: superadmin
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Password: superadmin123
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer -    Role: SUPER_ADMIN
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.o.s.config.SuperAdminInitializer - ⚠️  Please change the password after first login!
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2095506490<open>)]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2095506490<open>)] after transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5ecd0962]
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1954352064<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'ACME Corporation', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 16:33:47 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 16:33:47 [restartedMain] [tenant:global_trade] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: global_trade
2025-06-13 16:33:47 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 16:33:47 [restartedMain] [tenant:artisan_crafts] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: artisan_crafts
2025-06-13 16:33:47 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 16:33:47 [restartedMain] [tenant:tech_solutions] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: tech_solutions
2025-06-13 16:33:47 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:33:47 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:33:47 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 4 tenants with sample data
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1954352064<open>)]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1954352064<open>)] after transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1635354966<open>)] for JPA transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3b485844]
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:33:47 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1635354966<open>)]
2025-06-13 16:33:47 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1635354966<open>)] after transaction
2025-06-13 16:33:47 [restartedMain] [tenant:] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-13 16:34:41 [http-nio-8080-exec-4] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 16:34:41 [http-nio-8080-exec-4] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 16:34:41 [http-nio-8080-exec-4] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 36 ms
2025-06-13 16:34:42 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:34:42 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:34:42 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:35:11 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:35:11 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:35:11 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:35:11 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:35:11 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:35:11 [http-nio-8080-exec-5] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:52:14 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 11064 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 16:52:14 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 16:52:14 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 16:52:15 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 16:52:15 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 16:52:17 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 16:52:17 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 140 ms. Found 3 JPA repository interfaces.
2025-06-13 16:52:20 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 16:52:20 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 16:52:20 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 16:52:20 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 16:52:20 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5598 ms
2025-06-13 16:52:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 16:52:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 16:52:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 16:52:21 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 16:52:22 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 16:52:22 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 16:52:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.062s)
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 16:52:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.113s)
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 16:52:23 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 16:52:23 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 16:52:24 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 16:52:24 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 16:52:26 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 16:52:26 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:28 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:28 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:28 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 16:52:29 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:29 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:29 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.SuperAdminInitializer.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:30 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 16:52:32 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 16:52:32 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@66a0994f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1161e261, org.springframework.security.web.context.SecurityContextHolderFilter@2527cc48, org.springframework.security.web.header.HeaderWriterFilter@569427ed, org.springframework.web.filter.CorsFilter@c4f2d0b, org.springframework.security.web.authentication.logout.LogoutFilter@6d0157d1, dev.oasis.stockify.config.tenant.TenantHeaderFilter@76c84639, dev.oasis.stockify.config.tenant.TenantSecurityFilter@4c7181bd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7265cf82, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@361c622d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1ac9420d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@337846e4, org.springframework.security.web.access.ExceptionTranslationFilter@20c5ad0a, org.springframework.security.web.access.intercept.AuthorizationFilter@31c6a6b3]
2025-06-13 16:52:34 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 16:52:34 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 16:52:34 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 20.371 seconds (process running for 21.255)
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.SuperAdminInitializer.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(421754203<open>)] for JPA transaction
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:52:34 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@e7c414]
2025-06-13 16:52:34 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:52:34 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:34 [restartedMain] [tenant:stockify] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:34 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - 🔧 Creating super admin user in 'stockify' tenant...
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(421754203<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - ✅ Super admin user created successfully in 'stockify' tenant
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - 📋 Super Admin Credentials:
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Tenant: stockify
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Username: superadmin
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Password: superadmin123
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Role: SUPER_ADMIN
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - ⚠️  Please change the password after first login!
2025-06-13 16:52:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(421754203<open>)]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(421754203<open>)] after transaction
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@22d60a7c]
2025-06-13 16:52:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: stockify
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 16:52:35 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'Stockify Platform (Super Admin)', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(679804863<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'ACME Corporation', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 16:52:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 16:52:35 [restartedMain] [tenant:global_trade] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: global_trade
2025-06-13 16:52:35 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 16:52:35 [restartedMain] [tenant:artisan_crafts] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: artisan_crafts
2025-06-13 16:52:35 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 16:52:35 [restartedMain] [tenant:tech_solutions] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: tech_solutions
2025-06-13 16:52:35 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:52:35 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:52:35 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 16:52:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 16:52:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(679804863<open>)]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(679804863<open>)] after transaction
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1874396196<open>)] for JPA transaction
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@46e28bf2]
2025-06-13 16:52:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 16:52:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1874396196<open>)]
2025-06-13 16:52:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1874396196<open>)] after transaction
2025-06-13 16:52:44 [http-nio-8080-exec-1] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 16:52:44 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 16:52:44 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-13 16:52:44 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:52:44 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:52:44 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:52:44 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:52:44 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:52:44 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:52:45 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:52:45 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:52:45 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:52:45 [http-nio-8080-exec-9] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:52:45 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Login request detected, using tenant_id from form parameter: stockify
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: stockify
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: stockify (from context: stockify)
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(791798862<open>)] for JPA transaction
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: stockify
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: STOCKİFY and ensured table structure
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG o.s.jdbc.datasource.DataSourceUtils - Setting JDBC Connection [HikariProxyConnection@1162480020 wrapping conn0: url=jdbc:h2:mem:stockifydb user=SA] read-only
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@78a77d77]
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername]
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.service.AppUserDetailsService - Using existing tenant context: stockify
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG d.o.s.service.AppUserDetailsService - Login attempt - Username: superadmin, Tenant: stockify
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] ERROR d.o.s.service.AppUserDetailsService - Error during user authentication - Username: superadmin, Tenant: stockify, Error: Kullanıcı bulunamadı: superadmin (Tenant: stockify)
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:stockify] ERROR d.o.s.service.AppUserDetailsService - Authentication error: Kullanıcı bilgileri doğrulanamadı
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername] after exception: org.springframework.security.core.userdetails.UsernameNotFoundException: Kullanıcı bilgileri doğrulanamadı
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction rollback
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Rolling back JPA transaction on EntityManager [SessionImpl(791798862<open>)]
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] DEBUG o.s.jdbc.datasource.DataSourceUtils - Resetting read-only flag of JDBC Connection [HikariProxyConnection@1162480020 wrapping conn0: url=jdbc:h2:mem:stockifydb user=SA]
2025-06-13 16:53:05 [http-nio-8080-exec-6] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(791798862<open>)] after transaction
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:53:06 [http-nio-8080-exec-7] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:53:06 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:53:06 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:53:06 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:50 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:50 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:50 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:53 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:53 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:53 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:54 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:54 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 16:54:54 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:06 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 2000 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 17:41:06 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 17:41:06 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 17:41:06 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 17:41:06 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 17:41:08 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 17:41:08 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 3 JPA repository interfaces.
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3056 ms
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 17:41:09 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 17:41:10 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 17:41:10 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 17:41:10 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.032s)
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.051s)
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 17:41:10 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 17:41:10 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 17:41:11 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 17:41:11 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 17:41:12 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 17:41:12 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 17:41:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:13 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:13 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.SuperAdminInitializer.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:14 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 17:41:15 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 17:41:15 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6b93ded0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3afcea9, org.springframework.security.web.context.SecurityContextHolderFilter@4cd634fd, org.springframework.security.web.header.HeaderWriterFilter@452f0216, org.springframework.web.filter.CorsFilter@4c713189, org.springframework.security.web.authentication.logout.LogoutFilter@2deb6472, dev.oasis.stockify.config.tenant.TenantHeaderFilter@7e3c338b, dev.oasis.stockify.config.tenant.TenantSecurityFilter@219a8137, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7a1c95f0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7f868d26, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4c9640a6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ca8857b, org.springframework.security.web.access.ExceptionTranslationFilter@6b09c49, org.springframework.security.web.access.intercept.AuthorizationFilter@1baccf32]
2025-06-13 17:41:16 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 17:41:16 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 17:41:16 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 11.15 seconds (process running for 11.692)
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.SuperAdminInitializer.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(709305209<open>)] for JPA transaction
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@46b8ce6d]
2025-06-13 17:41:17 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - 🔧 Creating super admin user in 'stockify' tenant...
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(709305209<open>)] for JPA transaction
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - ✅ Super admin user created successfully in 'stockify' tenant
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - 📋 Super Admin Credentials:
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Tenant: stockify
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Username: superadmin
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Password: superadmin123
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer -    Role: SUPER_ADMIN
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.o.s.config.SuperAdminInitializer - ⚠️  Please change the password after first login!
2025-06-13 17:41:17 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.SuperAdminInitializer.run]
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(709305209<open>)]
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(709305209<open>)] after transaction
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 17:41:17 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@56f9cb0b]
2025-06-13 17:41:17 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 17:41:17 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 17:41:17 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: stockify
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 17:41:17 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'Stockify Platform (Super Admin)', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 17:41:17 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: acme_corp
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:17 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(923406362<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Table "tenant_config" not found; SQL statement:
INSERT INTO tenant_config (config_key, config_value, config_type, description) VALUES ('tenant_name', 'ACME Corporation', 'STRING', 'Display name for the tenant') ON CONFLICT (config_key) DO NOTHING [42102-224]
2025-06-13 17:41:18 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 17:41:18 [restartedMain] [tenant:global_trade] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: global_trade
2025-06-13 17:41:18 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:18 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 17:41:18 [restartedMain] [tenant:artisan_crafts] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: artisan_crafts
2025-06-13 17:41:18 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:18 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 17:41:18 [restartedMain] [tenant:tech_solutions] DEBUG d.oasis.stockify.config.DataLoader - 🏗️ Schema ensured for tenant: tech_solutions
2025-06-13 17:41:18 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 17:41:18 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 17:41:18 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 17:41:18 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 17:41:18 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(923406362<open>)]
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(923406362<open>)] after transaction
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1450337007<open>)] for JPA transaction
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLİC and ensured table structure
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5d7ebc5b]
2025-06-13 17:41:18 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 17:41:18 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1450337007<open>)]
2025-06-13 17:41:18 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1450337007<open>)] after transaction
2025-06-13 17:41:37 [http-nio-8080-exec-1] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 17:41:37 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 17:41:37 [http-nio-8080-exec-1] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-06-13 17:41:38 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:38 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:38 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:38 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:38 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:38 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:42 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:42 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:41:42 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:42:16 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:42:16 [http-nio-8080-exec-7] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:42:16 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:42:18 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:42:18 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 17:42:18 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:12:11 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 10044 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 18:12:11 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 18:12:11 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 18:12:11 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 18:12:11 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 18:12:13 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 18:12:13 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 3 JPA repository interfaces.
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2615 ms
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 18:12:14 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 18:12:14 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 18:12:14 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 18:12:15 [restartedMain] [tenant:] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer]: Factory method 'flywayInitializer' threw exception with message: Error creating bean with name 'multiTenantFlywayConfig' defined in file [C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes\dev\oasis\stockify\config\MultiTenantFlywayConfig.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'appUserRepository' defined in dev.oasis.stockify.repository.AppUserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'
2025-06-13 18:12:15 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-13 18:12:15 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-13 18:12:15 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-06-13 18:12:15 [restartedMain] [tenant:] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-13 18:12:15 [restartedMain] [tenant:] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

┌─────┐
|  flywayInitializer defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]
↑     ↓
|  multiTenantFlywayConfig defined in file [C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes\dev\oasis\stockify\config\MultiTenantFlywayConfig.class]
↑     ↓
|  appUserRepository defined in dev.oasis.stockify.repository.AppUserRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration
↑     ↓
|  jpaSharedEM_entityManagerFactory
└─────┘


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2025-06-13 18:18:19 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 9300 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 18:18:19 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 18:18:19 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 18:18:19 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 18:18:19 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 18:18:20 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 18:18:20 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 3 JPA repository interfaces.
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2390 ms
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 18:18:21 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 18:18:22 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 18:18:22 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.032s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.047s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.018s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.019s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.020s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.016s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:22 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.016s)
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 18:18:22 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 18:18:22 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 18:18:23 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 18:18:23 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 18:18:24 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 18:18:24 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:25 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:25 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 18:18:26 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 18:18:26 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@201c62a2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c909ff, org.springframework.security.web.context.SecurityContextHolderFilter@7a2f0b0e, org.springframework.security.web.header.HeaderWriterFilter@af4087f, org.springframework.web.filter.CorsFilter@6abc5d22, org.springframework.security.web.authentication.logout.LogoutFilter@5dab04ec, dev.oasis.stockify.config.tenant.TenantHeaderFilter@4a01bf8d, dev.oasis.stockify.config.tenant.TenantSecurityFilter@254dfcb, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2a0da457, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4895b99d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17f9d610, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@53ecd265, org.springframework.security.web.access.ExceptionTranslationFilter@629b8e72, org.springframework.security.web.access.intercept.AuthorizationFilter@2d406ea7]
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 8.893 seconds (process running for 9.374)
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 18:18:27 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:27 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1385027162<open>)] for JPA transaction
2025-06-13 18:18:27 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 18:18:27 [restartedMain] [tenant:] ERROR d.o.s.c.t.SchemaMultiTenantConnectionProvider - Failed to set schema for tenant: PUBLİC
org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "PUBLİC" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.config.DataLoader$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:798)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:806)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:797)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:782)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1358)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1347)
	at dev.oasis.stockify.Stockify.main(Stockify.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-06-13 18:18:27 [restartedMain] [tenant:] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-06-13 18:18:27 [restartedMain] [tenant:] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Tenant şeması seçilemedi: PUBLİC
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-13 18:18:27 [restartedMain] [tenant:] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.config.DataLoader$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:798)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:806)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:797)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:782)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1358)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1347)
	at dev.oasis.stockify.Stockify.main(Stockify.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection [Tenant şeması seçilemedi: PUBLİC] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 34 common frames omitted
Caused by: java.sql.SQLException: Tenant şeması seçilemedi: PUBLİC
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:46)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 41 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "PUBLİC" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	... 44 common frames omitted
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:27 [restartedMain] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-13 18:18:27 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-13 18:18:40 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 3828 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 18:18:40 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 18:18:40 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 18:18:40 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 18:18:40 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 18:18:41 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 18:18:42 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 129 ms. Found 3 JPA repository interfaces.
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2687 ms
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 18:18:43 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 18:18:43 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 18:18:43 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.016s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.042s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.025s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.003s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.018s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.018s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.017s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:18:44 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.020s)
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 18:18:44 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 18:18:44 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 18:18:45 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 18:18:45 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 18:18:45 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 18:18:45 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:46 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:18:47 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:47 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:47 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 18:18:48 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 18:18:48 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@16ad03b8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@16a6487d, org.springframework.security.web.context.SecurityContextHolderFilter@5a81cadb, org.springframework.security.web.header.HeaderWriterFilter@f5fda28, org.springframework.web.filter.CorsFilter@13a2d972, org.springframework.security.web.authentication.logout.LogoutFilter@4895b99d, dev.oasis.stockify.config.tenant.TenantHeaderFilter@4893e845, dev.oasis.stockify.config.tenant.TenantSecurityFilter@16d33acd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5745368e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@12295ab1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2ea1b7e7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@452efcc9, org.springframework.security.web.access.ExceptionTranslationFilter@27201250, org.springframework.security.web.access.intercept.AuthorizationFilter@6b6668b0]
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 9.418 seconds (process running for 9.842)
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 18:18:49 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:18:49 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: null)
2025-06-13 18:18:49 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(187574126<open>)] for JPA transaction
2025-06-13 18:18:49 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: public
2025-06-13 18:18:49 [restartedMain] [tenant:] ERROR d.o.s.c.t.SchemaMultiTenantConnectionProvider - Failed to set schema for tenant: PUBLİC
org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "PUBLİC" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.config.DataLoader$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:798)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:806)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:797)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:782)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1358)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1347)
	at dev.oasis.stockify.Stockify.main(Stockify.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
2025-06-13 18:18:49 [restartedMain] [tenant:] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-06-13 18:18:49 [restartedMain] [tenant:] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Tenant şeması seçilemedi: PUBLİC
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-13 18:18:49 [restartedMain] [tenant:] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.config.DataLoader$$SpringCGLIB$$0.run(<generated>)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:798)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:806)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:797)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:782)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:782)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1358)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1347)
	at dev.oasis.stockify.Stockify.main(Stockify.java:10)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection [Tenant şeması seçilemedi: PUBLİC] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:273)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:281)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:232)
	at org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:176)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 34 common frames omitted
Caused by: java.sql.SQLException: Tenant şeması seçilemedi: PUBLİC
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:46)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 41 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "PUBLİC" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	... 44 common frames omitted
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 18:18:49 [restartedMain] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-13 18:18:49 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-13 18:21:01 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 9736 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 18:21:01 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 18:21:01 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 18:21:01 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 18:21:01 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 18:21:03 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 18:21:03 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 3 JPA repository interfaces.
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2474 ms
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 18:21:04 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 18:21:05 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 18:21:05 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.016s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.041s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.018s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.018s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.016s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.017s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 18:21:05 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.017s)
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 18:21:05 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 18:21:05 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 18:21:06 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 18:21:06 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 18:21:06 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 18:21:06 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:07 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:08 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:08 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:08 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:08 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 18:21:08 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:08 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:08 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 18:21:09 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 18:21:09 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5583a0b3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a79e0cb, org.springframework.security.web.context.SecurityContextHolderFilter@3b787695, org.springframework.security.web.header.HeaderWriterFilter@83b7ae4, org.springframework.web.filter.CorsFilter@48dad1b6, org.springframework.security.web.authentication.logout.LogoutFilter@44569292, dev.oasis.stockify.config.tenant.TenantHeaderFilter@3288f0e1, dev.oasis.stockify.config.tenant.TenantSecurityFilter@18c7802d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@62221489, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6e71dfd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@74ec2285, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5fd934bb, org.springframework.security.web.access.ExceptionTranslationFilter@57b02cb8, org.springframework.security.web.access.intercept.AuthorizationFilter@56bcfd4c]
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 8.796 seconds (process running for 9.249)
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@15a97c14]
2025-06-13 18:21:10 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 18:21:10 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 18:21:10 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 18:21:10 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Schema "STOCKİFY" not found [90079-224]
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(314848496<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Schema "ACME_CORP" not found [90079-224]
2025-06-13 18:21:10 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 18:21:10 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 18:21:10 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 18:21:10 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 18:21:10 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 18:21:10 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 18:21:10 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 18:21:10 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(314848496<open>)]
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(314848496<open>)] after transaction
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1034602555<open>)] for JPA transaction
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1ab455f]
2025-06-13 18:21:10 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 18:21:10 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1034602555<open>)]
2025-06-13 18:21:10 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1034602555<open>)] after transaction
2025-06-13 18:21:48 [http-nio-8080-exec-2] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 18:21:48 [http-nio-8080-exec-2] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 18:21:48 [http-nio-8080-exec-2] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-13 18:21:48 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:48 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:21:48 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:48 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:21:48 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:48 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:21:49 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:49 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:21:49 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:49 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:49 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:21:59 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:59 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:21:59 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:01 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:01 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:01 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:02 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:02 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:02 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:39 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:39 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:39 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:39 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:39 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:39 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Login request detected, using tenant_id from form parameter: stockify
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: stockify
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: stockify (from context: stockify)
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1931311287<open>)] for JPA transaction
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: stockify
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] ERROR d.o.s.c.t.SchemaMultiTenantConnectionProvider - Failed to set schema for tenant: STOCKİFY
org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "STOCKİFY" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.service.AppUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.authentication.ObservationAuthenticationManager.lambda$authenticate$1(ObservationAuthenticationManager.java:54)
	at io.micrometer.observation.Observation.observe(Observation.java:565)
	at org.springframework.security.authentication.ObservationAuthenticationManager.authenticate(ObservationAuthenticationManager.java:53)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at dev.oasis.stockify.config.tenant.TenantHeaderFilter.doFilterInternal(TenantHeaderFilter.java:51)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Tenant şeması seçilemedi: STOCKİFY
2025-06-13 18:22:55 [http-nio-8080-exec-5] [tenant:stockify] ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter - An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Could not open JPA EntityManager for transaction
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.authentication.ObservationAuthenticationManager.lambda$authenticate$1(ObservationAuthenticationManager.java:54)
	at io.micrometer.observation.Observation.observe(Observation.java:565)
	at org.springframework.security.authentication.ObservationAuthenticationManager.authenticate(ObservationAuthenticationManager.java:53)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at dev.oasis.stockify.config.tenant.TenantHeaderFilter.doFilterInternal(TenantHeaderFilter.java:51)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.service.AppUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 96 common frames omitted
Caused by: org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection [Tenant şeması seçilemedi: STOCKİFY] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 106 common frames omitted
Caused by: java.sql.SQLException: Tenant şeması seçilemedi: STOCKİFY
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:46)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:1)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 109 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "STOCKİFY" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	... 112 common frames omitted
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:55 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:55 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:55 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 18:22:55 [http-nio-8080-exec-9] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:46:27 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 6680 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 21:46:27 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 21:46:27 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 21:46:27 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 21:46:27 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 21:46:29 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 21:46:29 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 119 ms. Found 3 JPA repository interfaces.
2025-06-13 21:46:30 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 21:46:30 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 21:46:30 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3673 ms
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 21:46:31 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 21:46:31 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 21:46:31 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.032s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.048s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.026s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.021s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.020s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.017s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 21:46:32 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.021s)
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 21:46:32 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 21:46:32 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 21:46:33 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 21:46:33 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 21:46:33 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 21:46:33 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 21:46:34 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 21:46:34 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 21:46:34 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:34 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:34 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:34 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 21:46:36 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:36 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:36 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 21:46:37 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 21:46:38 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@77c01c32, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24eef6eb, org.springframework.security.web.context.SecurityContextHolderFilter@4d98f444, org.springframework.security.web.header.HeaderWriterFilter@2f85042a, org.springframework.web.filter.CorsFilter@2d7f3307, org.springframework.security.web.authentication.logout.LogoutFilter@bfc1095, dev.oasis.stockify.config.tenant.TenantHeaderFilter@7729869e, dev.oasis.stockify.config.tenant.TenantSecurityFilter@276c2cd, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@77b4a303, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@207516bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@750a822, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@35ada685, org.springframework.security.web.access.ExceptionTranslationFilter@2b31992d, org.springframework.security.web.access.intercept.AuthorizationFilter@2e27587c]
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 12.891 seconds (process running for 13.75)
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 21:46:39 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@5d1aadde]
2025-06-13 21:46:39 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 21:46:39 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 21:46:39 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 21:46:39 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Schema "STOCKİFY" not found [90079-224]
2025-06-13 21:46:39 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:39 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (created_at,is_active,last_login,password,role,updated_at,username,id) values (?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(854665154<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Schema "ACME_CORP" not found [90079-224]
2025-06-13 21:46:40 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 21:46:40 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:40 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 21:46:40 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:40 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 21:46:40 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 21:46:40 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.created_at,au1_0.is_active,au1_0.last_login,au1_0.password,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 21:46:40 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 21:46:40 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 21:46:40 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(854665154<open>)]
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(854665154<open>)] after transaction
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1331117870<open>)] for JPA transaction
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@1764d68e]
2025-06-13 21:46:40 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 21:46:40 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1331117870<open>)]
2025-06-13 21:46:40 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1331117870<open>)] after transaction
2025-06-13 21:48:27 [http-nio-8080-exec-2] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-13 21:48:27 [http-nio-8080-exec-2] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-13 21:48:27 [http-nio-8080-exec-2] [tenant:] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-13 21:48:27 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:27 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:27 [http-nio-8080-exec-1] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:28 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:28 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:28 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:35 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:35 [http-nio-8080-exec-9] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:35 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:46 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:46 [http-nio-8080-exec-7] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:46 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:59 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:59 [http-nio-8080-exec-9] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:48:59 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:00 [http-nio-8080-exec-9] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:00 [http-nio-8080-exec-9] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:00 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:22 [http-nio-8080-exec-4] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:22 [http-nio-8080-exec-4] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:22 [http-nio-8080-exec-2] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:22 [http-nio-8080-exec-6] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:22 [http-nio-8080-exec-6] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:22 [http-nio-8080-exec-5] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Login request detected, using tenant_id from form parameter: stockify
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: stockify
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: stockify (from context: stockify)
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1504892894<open>)] for JPA transaction
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: stockify
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] ERROR d.o.s.c.t.SchemaMultiTenantConnectionProvider - Failed to set schema for tenant: STOCKİFY
org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "STOCKİFY" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:13)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.service.AppUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.authentication.ObservationAuthenticationManager.lambda$authenticate$1(ObservationAuthenticationManager.java:54)
	at io.micrometer.observation.Observation.observe(Observation.java:565)
	at org.springframework.security.authentication.ObservationAuthenticationManager.authenticate(ObservationAuthenticationManager.java:53)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at dev.oasis.stockify.config.tenant.TenantHeaderFilter.doFilterInternal(TenantHeaderFilter.java:51)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: null
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Tenant şeması seçilemedi: STOCKİFY
2025-06-13 21:49:40 [http-nio-8080-exec-10] [tenant:stockify] ERROR o.s.s.w.a.UsernamePasswordAuthenticationFilter - An internal error occurred while trying to authenticate the user.
org.springframework.security.authentication.InternalAuthenticationServiceException: Could not open JPA EntityManager for transaction
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:118)
	at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:133)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:201)
	at org.springframework.security.authentication.ObservationAuthenticationManager.lambda$authenticate$1(ObservationAuthenticationManager.java:54)
	at io.micrometer.observation.Observation.observe(Observation.java:565)
	at org.springframework.security.authentication.ObservationAuthenticationManager.authenticate(ObservationAuthenticationManager.java:53)
	at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:85)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:231)
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at dev.oasis.stockify.config.tenant.TenantHeaderFilter.doFilterInternal(TenantHeaderFilter.java:51)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
	at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
	at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
	at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:225)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:466)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:531)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:405)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:610)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:379)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at dev.oasis.stockify.service.AppUserDetailsService$$SpringCGLIB$$0.loadUserByUsername(<generated>)
	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:103)
	... 96 common frames omitted
Caused by: org.hibernate.exception.GenericJDBCException: Unable to acquire JDBC Connection [Tenant şeması seçilemedi: STOCKİFY] [n/a]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:63)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:116)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:143)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)
	at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:420)
	... 106 common frames omitted
Caused by: java.sql.SQLException: Tenant şeması seçilemedi: STOCKİFY
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:46)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:13)
	at org.hibernate.internal.ContextualJdbcConnectionAccess.obtainConnection(ContextualJdbcConnectionAccess.java:52)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:113)
	... 109 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Schema "STOCKİFY" not found [90079-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.engine.Database.getSchema(Database.java:1578)
	at org.h2.engine.SessionLocal.setCurrentSchemaName(SessionLocal.java:1317)
	at org.h2.jdbc.JdbcConnection.setSchema(JdbcConnection.java:1808)
	at com.zaxxer.hikari.pool.ProxyConnection.setSchema(ProxyConnection.java:447)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setSchema(HikariProxyConnection.java)
	at dev.oasis.stockify.config.tenant.SchemaMultiTenantConnectionProvider.getConnection(SchemaMultiTenantConnectionProvider.java:41)
	... 112 common frames omitted
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:40 [http-nio-8080-exec-3] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:41 [http-nio-8080-exec-8] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:41 [http-nio-8080-exec-8] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Set tenant context to: public
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.tenant.TenantInterceptor - 🏢 Using default tenant: public
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Opening JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:public] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: public (from context: public)
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:public] DEBUG o.s.o.j.s.OpenEntityManagerInViewInterceptor - Closing JPA EntityManager in OpenEntityManagerInViewInterceptor
2025-06-13 21:49:41 [http-nio-8080-exec-7] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Cleared tenant context after non-login request
2025-06-13 22:09:23 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 796 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 22:09:23 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 22:09:23 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 22:09:23 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-13 22:09:23 [restartedMain] [tenant:] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-13 22:09:25 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 22:09:25 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 3 JPA repository interfaces.
2025-06-13 22:09:26 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 22:09:26 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 22:09:26 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 22:09:26 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 22:09:26 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3541 ms
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 22:09:27 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 22:09:27 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - Flyway Community Edition 9.22.3 by Redgate
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - See release notes here: https://rd.gt/416ObMi
2025-06-13 22:09:27 [restartedMain] [tenant:] INFO  o.f.c.i.license.VersionPrinter - 
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.024s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.057s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.020s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.020s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.018s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.017s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:09:28 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.015s)
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 22:09:28 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.1.Final
2025-06-13 22:09:28 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 22:09:29 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 22:09:29 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 22:09:30 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 22:09:30 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:09:30 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:30 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:30 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:30 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:31 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:09:32 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:32 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.toggleUserStatus' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.createUserInTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllProductsAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getTenantStatistics' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getUsersByRoleAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllUsersAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.deleteUserFromTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:32 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 22:09:34 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 22:09:34 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@19593a40, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70508974, org.springframework.security.web.context.SecurityContextHolderFilter@3d279c3, org.springframework.security.web.header.HeaderWriterFilter@4424c8ab, org.springframework.web.filter.CorsFilter@5242fcb1, org.springframework.security.web.authentication.logout.LogoutFilter@4dc39f2d, dev.oasis.stockify.config.tenant.TenantHeaderFilter@622ad97a, dev.oasis.stockify.config.tenant.TenantSecurityFilter@50f860a0, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3ea31d9c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@922b52e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25426f3d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1842e09a, org.springframework.security.web.access.ExceptionTranslationFilter@3679e51c, org.springframework.security.web.access.intercept.AuthorizationFilter@52e9f678]
2025-06-13 22:09:34 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 12.432 seconds (process running for 13.319)
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Can Manage All Tenants: YES
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Accessible Tenants: ALL
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Primary Tenant: stockify
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@481b3d93]
2025-06-13 22:09:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 22:09:35 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 22:09:35 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 22:09:35 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Schema "STOCKİFY" not found [90079-224]
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(259718948<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Schema "ACME_CORP" not found [90079-224]
2025-06-13 22:09:35 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 22:09:35 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 22:09:35 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 22:09:35 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:09:35 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:09:35 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 22:09:35 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 22:09:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(259718948<open>)]
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(259718948<open>)] after transaction
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1313336172<open>)] for JPA transaction
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@4ac2a7d6]
2025-06-13 22:09:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:09:35 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1313336172<open>)]
2025-06-13 22:09:35 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1313336172<open>)] after transaction
2025-06-13 22:12:10 [File Watcher] [tenant:] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-13 22:12:10 [Thread-5] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:10 [Thread-5] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 22:12:10 [Thread-5] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-13 22:12:10 [Thread-5] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-13 22:12:10 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 796 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 22:12:10 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 22:12:10 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 22:12:10 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 22:12:10 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 19 ms. Found 3 JPA repository interfaces.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 820 ms
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.018s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.012s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.014s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.014s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.013s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.002s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.013s)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 22:12:11 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 22:12:11 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:11 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:12 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:12 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.toggleUserStatus' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.createUserInTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllProductsAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getTenantStatistics' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getUsersByRoleAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllUsersAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.deleteUserFromTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:12 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@51df7987, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@45fc479, org.springframework.security.web.context.SecurityContextHolderFilter@352b3782, org.springframework.security.web.header.HeaderWriterFilter@5f00c14f, org.springframework.web.filter.CorsFilter@6cdec35, org.springframework.security.web.authentication.logout.LogoutFilter@70722208, dev.oasis.stockify.config.tenant.TenantHeaderFilter@2be7fd0, dev.oasis.stockify.config.tenant.TenantSecurityFilter@3e38c192, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@dbd47d8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47012977, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@642faaa9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5079952d, org.springframework.security.web.access.ExceptionTranslationFilter@3fbc2a4c, org.springframework.security.web.access.intercept.AuthorizationFilter@3219dcfe]
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 3.048 seconds (process running for 171.697)
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Can Manage All Tenants: YES
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Accessible Tenants: ALL
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Primary Tenant: stockify
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@20a37d49]
2025-06-13 22:12:13 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 22:12:13 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 22:12:13 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 22:12:13 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Schema "STOCKİFY" not found [90079-224]
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(18158284<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Schema "ACME_CORP" not found [90079-224]
2025-06-13 22:12:13 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 22:12:13 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 22:12:13 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 22:12:13 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:13 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:13 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 22:12:13 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(18158284<open>)]
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(18158284<open>)] after transaction
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(2121221082<open>)] for JPA transaction
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@70a05b6e]
2025-06-13 22:12:13 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:13 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(2121221082<open>)]
2025-06-13 22:12:13 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(2121221082<open>)] after transaction
2025-06-13 22:12:13 [restartedMain] [tenant:] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-13 22:12:23 [File Watcher] [tenant:] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-13 22:12:23 [Thread-7] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:23 [Thread-7] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 22:12:23 [Thread-7] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-06-13 22:12:23 [Thread-7] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Starting Stockify using Java 17.0.12 with PID 796 (C:\Users\ozdem\IdeaProjects\STOCKIFY\target\classes started by ozdem in C:\Users\ozdem\IdeaProjects\STOCKIFY)
2025-06-13 22:12:23 [restartedMain] [tenant:] DEBUG dev.oasis.stockify.Stockify - Running with Spring Boot v3.2.1, Spring v6.1.2
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - The following 1 profile is active: "dev"
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 3 JPA repository interfaces.
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.17]
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-13 22:12:23 [restartedMain] [tenant:] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 675 ms
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:stockifydb user=SA
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:stockifydb'
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantSecurityFilter - Filter 'tenantSecurityFilter' configured for use
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.tenant.TenantHeaderFilter - Filter 'tenantHeaderFilter' configured for use
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🗄️ Starting Flyway migrations for all tenant schemas...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: PUBLIC
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history_publıc" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history_publıc" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.013s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: PUBLIC
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: stockify
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "stockify"."flyway_schema_history_stockify" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "stockify"."flyway_schema_history_stockify" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "stockify": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "stockify" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "stockify", now at version v1 (execution time 00:00.008s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: stockify
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: acme_corp
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "acme_corp"."flyway_schema_history_acme_corp" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "acme_corp"."flyway_schema_history_acme_corp" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "acme_corp": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "acme_corp" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "acme_corp", now at version v1 (execution time 00:00.010s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: acme_corp
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: global_trade
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "global_trade"."flyway_schema_history_global_trade" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "global_trade"."flyway_schema_history_global_trade" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "global_trade": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "global_trade" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "global_trade", now at version v1 (execution time 00:00.009s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: global_trade
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: artisan_crafts
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "artisan_crafts"."flyway_schema_history_artisan_crafts" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "artisan_crafts"."flyway_schema_history_artisan_crafts" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "artisan_crafts": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "artisan_crafts" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "artisan_crafts", now at version v1 (execution time 00:00.009s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: artisan_crafts
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🏗️ Migrating schema: tech_solutions
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:stockifydb (H2 2.2)
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.2.224 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.220.
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "tech_solutions"."flyway_schema_history_tech_solutions" does not exist yet
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "tech_solutions"."flyway_schema_history_tech_solutions" ...
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "tech_solutions": << Empty Schema >>
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "tech_solutions" to version "1 - init schema"
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "tech_solutions", now at version v1 (execution time 00:00.010s)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Successfully migrated schema: tech_solutions
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Flyway migrations completed for 6 schemas
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Configuring Hibernate multi-tenancy properties
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.stockify.config.HibernateConfig - Multi-tenancy configuration completed
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.AppUserDetailsService.loadUserByUsername' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG o.s.o.j.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler - Creating new EntityManager for shared EntityManager invocation
2025-06-13 22:12:24 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:24 [restartedMain] [tenant:] INFO  d.o.s.s.StockNotificationService - StockNotificationService initialized. Email service enabled: false
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.StockNotificationService.markAsRead' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateStockLevel' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.saveProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.ProductService.updateProduct' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.config.DataLoader.run' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.toggleUserStatus' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.createUserInTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllProductsAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getTenantStatistics' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getUsersByRoleAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.getAllUsersAcrossAllTenants' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT,readOnly
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.SuperAdminService.deleteUserFromTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.createTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.activateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] TRACE o.s.t.a.AnnotationTransactionAttributeSource - Adding transactional method 'dev.oasis.stockify.service.TenantManagementService.deactivateTenant' with attribute: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:24 [restartedMain] [tenant:] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42d9648d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@695fc950, org.springframework.security.web.context.SecurityContextHolderFilter@1ebc2604, org.springframework.security.web.header.HeaderWriterFilter@5c28dd9b, org.springframework.web.filter.CorsFilter@46327d6a, org.springframework.security.web.authentication.logout.LogoutFilter@238b8d87, dev.oasis.stockify.config.tenant.TenantHeaderFilter@77c288f5, dev.oasis.stockify.config.tenant.TenantSecurityFilter@74f1429a, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2e82b182, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7d37a0c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6900c944, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17334943, org.springframework.security.web.access.ExceptionTranslationFilter@721d91c4, org.springframework.security.web.access.intercept.AuthorizationFilter@44d343b1]
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path ''
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  dev.oasis.stockify.Stockify - Started Stockify in 2.576 seconds (process running for 183.994)
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🚀 Starting multi-tenant setup: Flyway migrations + Super admin creation...
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Checking/creating super admin user in 'stockify' schema...
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 🔧 Creating super admin user in 'stockify' schema...
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Super admin user created successfully in 'stockify' schema
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - 📋 Super Admin Credentials:
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Schema: stockify
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Username: superadmin
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Password: superadmin123
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Role: SUPER_ADMIN
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Can Manage All Tenants: YES
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Accessible Tenants: ALL
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig -    Primary Tenant: stockify
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ⚠️  Please change the password after first login!
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.o.s.config.MultiTenantFlywayConfig - ✅ Multi-tenant setup completed successfully!
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [dev.oasis.stockify.config.DataLoader.run]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:12:25 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@f91d39a]
2025-06-13 22:12:25 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🚀 Starting Multi-Tenant Data Loader...
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: stockify
2025-06-13 22:12:25 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - 🏛️ Stockify platform tenant - super admin already created by SuperAdminInitializer
2025-06-13 22:12:25 [restartedMain] [tenant:stockify] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: stockify
2025-06-13 22:12:25 [restartedMain] [tenant:stockify] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant stockify: Schema "STOCKİFY" not found [90079-224]
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 👥 Creating users for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: admin with role: ADMIN for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into app_user (accessible_tenants,can_manage_all_tenants,created_at,is_active,is_global_user,last_login,password,primary_tenant,role,updated_at,username,id) values (?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created user: operator with role: USER for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - 📦 Creating products for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Handmade Ceramic Mug for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Vintage Style Jewelry Box for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findBySku]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.category,p1_0.created_at,p1_0.created_by,p1_0.description,p1_0.etsy_product_id,p1_0.is_active,p1_0.is_featured,p1_0.low_stock_threshold,p1_0.price,p1_0.sku,p1_0.stock_level,p1_0.title,p1_0.updated_at,p1_0.updated_by from product p1_0 where p1_0.sku=?
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Found thread-bound EntityManager [SessionImpl(1373550598<open>)] for JPA transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] DEBUG o.s.orm.jpa.JpaTransactionManager - Participating in existing transaction
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.StockNotificationService.checkAndCreateLowStockNotification]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.service.ProductService.saveProduct]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✅ Created product: Organic Cotton Tote Bag for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ⚙️ Setting up configuration for tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] WARN  d.oasis.stockify.config.DataLoader - ⚠️ Could not initialize config for tenant acme_corp: Schema "ACME_CORP" not found [90079-224]
2025-06-13 22:12:25 [restartedMain] [tenant:acme_corp] INFO  d.oasis.stockify.config.DataLoader - ✨ Successfully initialized tenant: acme_corp
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: global_trade
2025-06-13 22:12:25 [restartedMain] [tenant:global_trade] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:25 [restartedMain] [tenant:global_trade] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:25 [restartedMain] [tenant:global_trade] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: global_trade, skipping initialization
2025-06-13 22:12:25 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: artisan_crafts
2025-06-13 22:12:25 [restartedMain] [tenant:artisan_crafts] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:26 [restartedMain] [tenant:artisan_crafts] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:26 [restartedMain] [tenant:artisan_crafts] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: artisan_crafts, skipping initialization
2025-06-13 22:12:26 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 🏢 Initializing data for tenant: tech_solutions
2025-06-13 22:12:26 [restartedMain] [tenant:tech_solutions] TRACE o.s.t.i.TransactionInterceptor - No need to create transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.findByUsername]: This method is not transactional.
2025-06-13 22:12:26 [restartedMain] [tenant:tech_solutions] DEBUG org.hibernate.SQL - select au1_0.id,au1_0.accessible_tenants,au1_0.can_manage_all_tenants,au1_0.created_at,au1_0.is_active,au1_0.is_global_user,au1_0.last_login,au1_0.password,au1_0.primary_tenant,au1_0.role,au1_0.updated_at,au1_0.username from app_user au1_0 where au1_0.username=?
2025-06-13 22:12:26 [restartedMain] [tenant:tech_solutions] INFO  d.oasis.stockify.config.DataLoader - 📋 Data already exists for tenant: tech_solutions, skipping initialization
2025-06-13 22:12:26 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - ✅ Multi-Tenant Data Loader completed successfully!
2025-06-13 22:12:26 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 📊 Initialized 5 tenants with sample data
2025-06-13 22:12:26 [restartedMain] [tenant:] INFO  d.oasis.stockify.config.DataLoader - 👥 Each tenant has 2 users and 3 products
2025-06-13 22:12:26 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [dev.oasis.stockify.config.DataLoader.run]
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1373550598<open>)]
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1373550598<open>)] after transaction
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Creating new transaction with name [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG d.o.s.c.t.CurrentTenantIdentifierResolverImpl - Resolving tenant identifier: PUBLIC (from context: null)
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Opened new EntityManager [SessionImpl(1507592874<open>)] for JPA transaction
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Getting connection for tenant: PUBLIC
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG d.o.s.c.t.SchemaMultiTenantConnectionProvider - Successfully set connection schema to: PUBLIC
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Exposing JPA transaction as JDBC [org.springframework.orm.jpa.vendor.HibernateJpaDialect$HibernateConnectionHandle@3cb61d20]
2025-06-13 22:12:26 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG org.hibernate.SQL - insert into product (category,created_at,created_by,description,etsy_product_id,is_active,is_featured,low_stock_threshold,price,sku,stock_level,title,updated_at,updated_by,id) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,default)
2025-06-13 22:12:26 [restartedMain] [tenant:] TRACE o.s.t.i.TransactionInterceptor - Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Initiating transaction commit
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Committing JPA transaction on EntityManager [SessionImpl(1507592874<open>)]
2025-06-13 22:12:26 [restartedMain] [tenant:] DEBUG o.s.orm.jpa.JpaTransactionManager - Closing JPA EntityManager [SessionImpl(1507592874<open>)] after transaction
2025-06-13 22:12:26 [restartedMain] [tenant:] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-13 22:12:30 [SpringApplicationShutdownHook] [tenant:] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-13 22:12:30 [SpringApplicationShutdownHook] [tenant:] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-06-13 22:12:30 [SpringApplicationShutdownHook] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-06-13 22:12:30 [SpringApplicationShutdownHook] [tenant:] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
